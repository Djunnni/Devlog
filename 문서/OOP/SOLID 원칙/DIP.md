
### 5. DIP(의존성 역전 법칙)

고차원 모듈이 저차원 모듈에 의존하면 안된다. -> 추상화된 것이 구체화된 것에 의존하면 안된다, 구체화 된 것이 추상화된 것에 의존해야한다.

쉽게 더 말하면 자주 변경되는 concrete class에 의존하지 마라.

#### Concrete Class(구상 클래스)

추상의 반대로 구체적이고 명확한 의미의 클래스다. (abstract, interface와 다른 구현한 클래스를 생각하면 좋다.)

#### 책의 설명을 이어서

어떤 클래스에서 상속을 받아야 한다면, 기반 클래스를 추상 클래스로 만들어라. 어떤 클래스의 참조를 가져야 한다면 참조대상이 되는 클래스를 추상클래스로 만들어라
만약 어떤 함수를 호출해야한다면, 호출되는 함수를 추상함수로 만들어라.

추상클래스와 인터페이스는 보통 자신에서 유도된 구체적인 클래스보다 덜 변한다.

그러므로 구체적인 것 보다는 이런 추상적인 것에 의존하는 편이 낫다. 이 원칙을 잘 지키면 변화가 일어났을 때, 시스템에 미치는 영향이 적다.

**그렇다면 Vector나 String을 사용하면 안된다는 말인가? 이것 모두 컨크리트 클래스인데?**

그렇지 않다. 앞으로 변하지 않을 컨크리트 클래스에 의존하는 것은 완벽하게 안전하다. 

의존하면 안되는 것은 `자주 변경되는` 컨크리트 클래스다. 활발히 개발중인 컨크리트 클래스나 변할 가능성이 높은 비즈니스 규칙을 담은 클래스가 여기에 속한다.
이런 클래스의 인터페이스를 만든 다음, 이 인터페이스에 의존하는 것이 바람직하다.

UML을 활용하면 이 원칙을 지키는 지 쉽게 검사할 수 있다. UML 다이어그램의 화살표마다 따라가서 모두 인터페이스나 추상 클래스를 가리키는지 확인하면 된다.

만약 컨크리트 클래스에 의존하는데 그 클래스가 자주 변경된다면 DIP를 어기는 것이며 시스템도 변화에 민감하게 되어 버릴것이다.