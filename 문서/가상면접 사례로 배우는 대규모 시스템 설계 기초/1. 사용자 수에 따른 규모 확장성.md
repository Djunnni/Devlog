# 1. 사용자 수에 따른 규모 확장성

#### 어떤 데이터베이스를 사용할 것인가?

RDBMS(관계형 데이터베이스)의 경우 테이블과 열, 칼럼으로 표현해 SQL을 사용하여 여러 테이블에 있는 데이터를 그 관계에 JOIN해서 사용한다.

비 관계형 데이터 베이스(NoSQL)은 CouchDB, Neo4j, Cassandra, HBase 등이 있는데 (1) 키-값 저장소, (2) 그래프 저장소, (3) 칼럼 저장소, (4) 문서 저장소가 있다. 이런 비-관계형 데이터베이스는 조인연산은 지원하지 않는다.

| 비-관계형 DB가 바람직한 선택일 때의 기준은 무엇일까?

* 아주 낮은 응답 지연시간(latency) 요구
* 다루는 데이터가 비정형인 경우
* 데이터를 직렬화, 역직렬화 할 수 있기만 하면 됨
* 아주많은 양의 데이터를 저장할 필요성

#### 수직적 vs 수평적 규모 확장

* 스케일 업
    * 수직적 규모 확장으로 서버에 고사양 자원(더 좋은 CPU, 메모리)를 추가하는 행위다.
* 스케일 아웃
    * 수평적 규모 확장은 더 많은 서버를 추가해 성능을 개선하는 행위다.

| 서버로 유입되는 트래픽이 적을 때는 수직적 확장이 좋은 선택인데 가장 큰 장점은 단순함이다. 하지만 *심각한 단점* 이 있어 부하 분산기나 로드밸런서를 도입한 스케일 아웃이 더 적합한 경우가 많다.
* 수직적인 규모 확장은 한계가 있다. 자원을 무한대로 증설할 수 없기 때문이다.
* 수직적 규모 확장은 장애에 대한 자동복구(failover) 방안이나 다중화(redundancy) 방안을 제시하지 않는다. 서버에 장애발생 시, 완전히 중단된다.

* 로드밸런서
    * 부하 분산 집합에 속한 웹 서버들에게 트래픽 부하를 고르게 분산하는 역할을 한다.

### 데이터베이스 다중화

어떤 장점이 있나?

1. 더 나은 성능
    * 주-부 다중화 모델에서 모든 데이터 변경 연산은 주 데이터베이스 서버로만 전달되는 반면 읽기 연산은 부 데이터베이스 서버들로 분산된다. 병렬로 처리될 수 있는 질의 수가 늘어나므로 성능이 좋아진다.
2. 안정성
    * 자연 재해의 이유로 데이터베이스 서버 가운데 일부가 파괴되어도 데이터는 보존될 것이다. 데이터를 지역적으로 떨어진 여러장소에 다중화시켜 놓을 수 있기 때문이다.
3. 가용성
    * 데이터를 여러 지역에 복제해 둠으로써 하나의 데이터베이스 서버에서 장애가 발생하더라도 다른 서버에 있는 데이터를 가져와 계속 서비스 할 수 있게 된다.

