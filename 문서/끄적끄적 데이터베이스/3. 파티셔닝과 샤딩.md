# 3. 파티셔닝과 샤딩

파티셔닝과 샤딩의 목적은 결국 데이터베이스에 더 빠르게 질의할 수 있도록 도와주는 운영방식이라고 생각한다.

## 왜 필요할까?

프로젝트는 단순히 1G, 10G, 100G 정도의 데이터를 관리한다고 하자. 그때까지는 DB가 잘 버틴다. 하지만 점점 데이터가 커지고 관리하기 어려운 TB, ZB를 넘어갈 때, 어떻게 하면 더 빠르게 DB에 질의할 지 고민하게 된다.

이때, 파티셔닝과 샤딩 중 무엇을 하면 좋을 지 전략적인 선택이 필요하다고 생각한다.

## 파티셔닝

파티셔닝에는 수평적, 수직적 기법이 있다.

- 수평적
    - 레코드 레벨보다 행이나 파티션단위로 분리하는 방법으로 시간 범위, 컬럼 크기(10000 -> A, 20000 -> B) 같은 방법이 있다.
- 수직적
    - 행이나 파티션보다는 레코드레벨에서 분할하는 방법이다. 컬럼을 기준으로 데이터를 분리해 필요한 컬럼만 관리하는 방법

하나의 데이터베이스 테이블에서 해시, 리스트, 컴포지션과 같은 방법을 통해 저장방식을 구분지을 수 있다.

결국엔 하나의 물리적 저장소에서 데이터를 쪼개어 저장하는 방식을 의미한다.

- 장점
    - 성능과 확장성

## 샤딩

샤딩은 수평적 확장 기법에 가깝다.

다만 데이터를 분산해서 저장하기 때문에 하나의 저장소만 사용하기보다 분산해서 다른 저장소에서 관리한다. 샤드는 독립적으로 관리될 수 있으며 협력을 통해 동작한다.

- 장점
    - 가용성과 확장성

## 파티셔닝과 샤딩의 가장 큰 차이는?

가용성을 더 고려할 건지 여부인 것 같다. 단순히 파티셔닝일 경우, 장애가 발생하면 하나의 저장소에 문제가 발생하여 문제가 전파될 가능성이 존재한다. 샤딩의 경우, 일부 영역의 문제로 경계가 가둬질 수 있다.

샤딩은 파티셔닝과 달리 설계와 운용비용에 있어 더 들어갈 수 있다.